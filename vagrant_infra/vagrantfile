Vagrant.configure("2") do |config|
  
#   config.vm.box = "gutehall/ubuntu24-10"
#   config.vm.box_version = "2024.10.11"
  config.vm.box = "gutehall/ubuntu24-04"
  #config.vm.box_version = "1.0.0"
  config.vm.box_check_update = false

  #config.vm.synced_folder ".", "/vagrant", disabled: true

  config.vm.provider :vmware_fusion do |vmware|
    vmware.gui = false
    vmware.cpus = 4
    vmware.memory = 4096
    vmware.allowlist_verified = true
    vmware.ssh_info_public = true
    vmware.linked_clone = false
  end

    config.vm.define "nexus01" do |node|
      node.vm.network "public_network", ip: "192.168.1.160"
      node.vm.hostname = "nexus01"
      node.vm.provision "shell", inline: <<-SHELL
        mkdir -p /home/vagrant/.ssh
        echo 'ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOlPFhFwKepToM3D/5wgUfFsPsv99sZkfUr9gnuhYYr/ fill@MacBookAir.local' >> /home/vagrant/.ssh/authorized_keys
        chmod 600 /home/vagrant/.ssh/authorized_keys
        chmod 700 /home/vagrant/.ssh
        chown -R vagrant:vagrant /home/vagrant/.ssh
      SHELL
  end
end

